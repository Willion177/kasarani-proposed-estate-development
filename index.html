<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Estate Development - Final Presentation</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body { margin: 0; padding: 0; font-family: Arial, sans-serif; }
    #map { position: absolute; top: 0; bottom: 0; width: 100%; }
    .info-panel { position: absolute; top: 10px; left: 10px; background: white; padding: 12px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 1; max-width: 250px; }
    .info-panel h2 { margin: 0 0 6px 0; font-size: 15px; }
    .info-panel p { margin: 3px 0; font-size: 10px; color: #666; }
    .info-panel strong { color: #333; }
    .legend { margin-top: 8px; padding-top: 8px; border-top: 1px solid #ddd; }
    .controls { position: absolute; top: 10px; right: 10px; background: white; padding: 10px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 1; width: 240px; max-height: 90vh; overflow-y: auto; }
    .controls h3 { margin: 0 0 8px 0; font-size: 12px; border-bottom: 2px solid #4264fb; padding-bottom: 4px; }
    .feature-section { margin: 8px 0; padding: 6px; background: #f8f9fa; border-radius: 4px; border-left: 3px solid #4264fb; }
    .feature-section h4 { margin: 0 0 5px 0; font-size: 10px; display: flex; justify-content: space-between; }
    .toggle-btn { font-size: 8px; padding: 2px 5px; background: #4264fb; color: white; border: none; border-radius: 2px; cursor: pointer; }
    .control-item { margin: 4px 0; }
    .control-item label { display: block; font-size: 9px; color: #666; margin-bottom: 2px; }
    .control-item input[type="range"] { width: 100%; }
    .value-display { font-weight: bold; color: #4264fb; }
    button { width: 100%; padding: 6px; margin: 2px 0; border: none; border-radius: 4px; background: #4264fb; color: white; cursor: pointer; font-size: 9px; }
    button:hover { background: #3451d9; }
    button.secondary { background: #6c757d; }
    #status { position: absolute; bottom: 10px; left: 10px; background: rgba(0,0,0,0.85); color: white; padding: 8px; border-radius: 4px; font-size: 10px; }
  </style>
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.js"></script>
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.0.0/mapbox-gl.css" rel="stylesheet">
</head>
<body>
  <div id="map"></div>
<div class="info-panel">
  <div id="new-legend-section" style="margin-top: 8px; padding-top: 8px; border-top: 1px solid #ddd;">
    <p style="font-family: 'Verdana', sans-serif !important; color: #3498db !important; font-size: 13px !important; margin: 0;"><strong>50-acre land for sale, Kasarani</strong></p>
  </div>
  <p style="font-size:11px;margin:2px 0;">üìç Location: Kasarani, Nairobi</p>
  <p style="font-size:11px;margin:2px 0;">‚û§ Just 2.5 km off Thika Highway</p>
  <p style="font-size:11px;margin:2px 0;">‚û§ 50 acres (20.23 hectares)</p>  <!-- New -->
  <p style="font-size:11px;margin:2px 0;">‚û§ Approx. 600 m x 351m parallelogram</p>  <!-- New -->
 </div>
 
  <div id="contact-footer" style="position: fixed; bottom: 10px; left: 50%; transform: translateX(-50%); background: white; padding: 8px 12px; border-radius: 4px; box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 1000;">
    <p style="margin: 0; font-size: 13px; color: #333;"><strong>Contact Information:</strong></p>
    <p style="margin: 2px 0 0 0; font-size: 11px; color: #666;">Wilson Njuguna | +254 731 268 385</p>
  </div>

<script>
mapboxgl.accessToken='pk.eyJ1Ijoia2lyb25qaWdnIiwiYSI6ImNtaDc5enB6NzBxZXQya3NpbHh3cTdxaTUifQ.PvzCNIg-j8EbgpJqHZK7sQ';

const BASE={mall:[36.918847,-1.229852],stadium:[36.916175,-1.229245],housesZone:[[36.914865,-1.226459],[36.914532,-1.227557],[36.913962,-1.228479],[36.913455,-1.229514]]};
const boundary=[[36.914538383841084,-1.225346020052707],[36.920330936744762,-1.229591247180744],[36.918307510730465,-1.233122323950794],[36.912118207627906,-1.229789622280185],[36.914538383841084,-1.225346020052707]];
const lngs=boundary.map(c=>c[0]),lats=boundary.map(c=>c[1]);
const centerLng=(Math.min(...lngs)+Math.max(...lngs))/2,centerLat=(Math.min(...lats)+Math.max(...lats))/2;
const neCorner=[Math.max(...lngs),Math.max(...lats)];
BASE.gate=[(neCorner[0]+BASE.mall[0])/2,(neCorner[1]+BASE.mall[1])/2];

const M2D=0.00001;
// INTEGRATED FINAL COORDINATES (No longer used, but kept for reference)
const adj={gate:{lng:-200,lat:0},mall:{lng:-184,lat:49,size:67},stadium:{lng:-54,lat:0,size:100},houses:{lng:-11,lat:-21,rotation:150},park1:{lng:-27,lat:196,w:100,h:81},park2:{lng:37,lat:-192,w:100,h:82},park3:{lng:-41,lat:-101,w:91,h:42},road:{lng:41,lat:-100}};

const map=new mapboxgl.Map({container:'map',style:'mapbox://styles/mapbox/satellite-streets-v12',center:[centerLng,centerLat],zoom:15.5,pitch:60,antialias:true});
let bounds;

function getCoord(base,adjustment){return[base[0]+(adjustment.lng*M2D),base[1]+(adjustment.lat*M2D)];}

// All update functions for proposed developments removed as requested.
function updateGate(){}
function updateMall(){}
function updateStadium(){}
function updateHouses(){}
function updateParks(){}
function updateRoads(){}

map.on('load',()=>{
    map.addSource('mapbox-dem',{type:'raster-dem',url:'mapbox://mapbox.mapbox-terrain-dem-v1'});
    map.setTerrain({source:'mapbox-dem',exaggeration:1.5});
    map.addLayer({id:'sky',type:'sky',paint:{'sky-type':'atmosphere'}});
    
    // FIX: Use hardcoded boundary array instead of external file
    map.addSource('site-boundary',{
        type:'geojson',
        data:{
            type:'Feature',
            geometry:{
                type:'Polygon',
                coordinates:[boundary]
            }
        }
    });
    
    map.addLayer({id:'boundary-fill',type:'fill',source:'site-boundary',paint:{'fill-color':'#f00','fill-opacity':0.12}});
    map.addLayer({id:'boundary-line',type:'line',source:'site-boundary',paint:{'line-color':'#FF0000','line-width':6,'line-dasharray':[3,2]}});
    
    bounds=new mapboxgl.LngLatBounds();
    boundary.forEach(c=>bounds.extend(c));
    map.fitBounds(bounds,{padding:60,pitch:60});
    
    // All proposed development sources removed as requested.
    
    // All proposed development layers removed as requested.
    // Only boundary and terrain remain.
    document.getElementById('status').textContent='‚úÖ Ready! Adjust features with sliders.';
});

// All control event listeners and related functions removed as requested.
window.fitView=()=>{if(bounds)map.fitBounds(bounds,{padding:60,pitch:60,duration:2000});};
window.exportCoords=()=>{console.log('Export function removed as controls are removed.');};

console.log('üöÄ Estate map ready! All features removed for final presentation.');
</script>
</body>
</html>
